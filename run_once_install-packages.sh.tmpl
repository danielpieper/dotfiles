{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash
set -xe

# install aur helper
if [[ ! -x "$(command -v yay)" ]]
then
    cd /tmp
    git clone https://aur.archlinux.org/yay.git
    cd yay
    makepkg -si
fi

yay="yay -S --needed --noconfirm"

$yay \
{{- /* essential tools */}}
  bat git-delta-bin exa htop iotop powertop httpie jq \
  mc ncdu unzip wget make ranger nano ytop glow \
{{- /* other tools */}}
  1password-cli aws-cli hostsctl weechat \
  android-file-transfer android-tools usbutils \
{{- /* i3 and tools */}}
  i3-gaps dunst feh checkupdates-aur i3lock-fancy-git rofi udiskie \
  gksu imwheel pavucontrol playerctl-git network-manager-applet \
  networkmanager-openvpn py3status gparted dex wpa_actiond \
  pulseaudio-bluetooth picom \
{{- /* desktop apps */}}
  kitty spotify tor-browser vlc chromium chromium-widevine \
{{- /* infrastructure */}}
  minikube docker-compose helm terraform tflint ansible hcloud \
{{- /* databases */}}
  mysql-workbench mariadb-clients tableplus \
{{- /* neovim */}}
  neovim fzy ripgrep the_silver_searcher tmux tmuxinator watchman \
  editorconfig-core-c \
{{- /* displays */}}
  arandr autorandr \
{{- /* languages */}}
  composer xdebug php-gd php-intl php-phpdbg php-sqlite php-tidy \
  go go-tools \
  nvm yarn \
  lua luarocks \
{{- /* api's */}}
  postman-bin openapi-generator

{{ if eq .chezmoi.hostname "falcon9" -}}
# laptop specific
$yay acpilight laptop-mode-tools thermald upower
{{ end -}}
{{ else if eq .chezmoi.os "darwin" -}}
#!/bin/sh
brew tap cjbassi/ytop
brew tap jason0x43/homebrew-neovim-nightly
# homebrew returns error if the formula is installed and outdated
brew install bat exa awscli composer ctop git-delta fzy go go-jira \
  gradle helm htop httpie jenv jq midnight-commander ncdu pre-commit \
  ranger ripgrep skhd terraform tflint the_silver_searcher tmux \
  tmuxinator watch watchman weechat wget wifi-password yabai yarn zsh ytop glow || true
brew cask install neovim-nightly jetbrains-toolbox || true
brew install hashicorp/tap/terraform-ls || true
brew install golangci/tap/golangci-lint || true

{{ end -}}
npm install -g markdownlint-cli
